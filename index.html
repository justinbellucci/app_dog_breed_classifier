<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Dog Breed Classifier</title>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport"/>
        <link rel="stylesheet" href="frontend/styles.css">
        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v4.js"></script>
        <!-- Load jquery.js (AJAX) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>Dog Breed Classifier</h1>
        <div class = "container">
            <!-- <h1 class="box">Post 1</h1> -->
            <div class = "header box">
                <label for="file-upload" class="custom-file-upload">
                  Upload Image
                </label>
                <input type="file" id="file-upload">
            </div>
            <div class="content box">
                <img class = "content-box box" id="blah" src="backend/assets/puppy.jpg" alt="Placeholder Dog Image">
                <div class = "content-box box" id="my_dataviz"></div>
            </div>
            <p class="footer box">I am a placeholder for the footer.</p>
        </div>
        </h1>
        <script>


          // set the dimensions and margins of the graph
          var margin = {top: 20, right: 30, bottom: 40, left: 90},
              width = 300 - margin.left - margin.right,
              height = 150 - margin.top - margin.bottom;
          
          // append the svg object to the body of the page
          var svg = d3.select("#my_dataviz")
            .append("svg")
              .attr("width", width + margin.left + margin.right)
              .attr("height", height + margin.top + margin.bottom)
            .append("g")
              .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");
          
          // Parse the Data
          d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum_header.csv", function(data) {
          
            // Add X axis
            var x = d3.scaleLinear()
              .domain([0, 13000])
              .range([ 0, width]);
            svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x))
              .selectAll("text")
                .attr("transform", "translate(-10,0)rotate(-45)")
                .style("text-anchor", "end");
          
            // Y axis
            var y = d3.scaleBand()
              .range([ 0, height ])
              .domain(data.map(function(d) { return d.Country; }))
              .padding(.1);
            svg.append("g")
              .call(d3.axisLeft(y))
          
            //Bars
            svg.selectAll("myRect")
              .data(data)
              .enter()
              .append("rect")
              .attr("x", x(0) )
              .attr("y", function(d) { return y(d.Country); })
              .attr("width", function(d) { return x(d.Value); })
              .attr("height", y.bandwidth() )
              .attr("fill", "#69b3a2")
          
          
              // .attr("x", function(d) { return x(d.Country); })
              // .attr("y", function(d) { return y(d.Value); })
              // .attr("width", x.bandwidth())
              // .attr("height", function(d) { return height - y(d.Value); })
              // .attr("fill", "#69b3a2")
          
          })
          
          </script>
            <script>
              document.getElementById('file-upload').addEventListener('change', function(){
              var file = this.files[0];
              console.log("name : " + file.name);
              console.log("size : " + file.size);
              console.log("type : " + file.type);
              console.log("date : " + file.lastModified);
              }, false);
            </script>
          <script>
            function readURL(input){
              if(input.files && input.files[0]){
                var reader = new FileReader();

                reader.onload = function(e){
                  $('#blah').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);  //convert to base64 string
              }
            }

            $("#imgIng").change(function(){
              readURL(this);
            });
          </script>
    </body>
</html>